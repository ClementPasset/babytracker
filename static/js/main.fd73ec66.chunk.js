(this["webpackJsonpbabytracker-frontend"]=this["webpackJsonpbabytracker-frontend"]||[]).push([[0],{24:function(e,t,a){},25:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),r=a(13),i=a.n(r),s=a(0),o=function(){return Object(s.jsx)("header",{className:"header",children:Object(s.jsx)("h1",{className:"header__title",children:"Suivi de Zo\xe9 PASSET"})})},l=a(3),d=a(9),u=a(8),j=a(10),A=a(4),g=a.p+"static/media/pee-drop.4b4cef13.png",p="data:image/png;base64,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",b="data:image/png;base64,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",h=function(e){var t=e.isLogged,a=e.data,n=e.setDeletePopup,c=e.displayDatas,r=e.setDisplayDatas;a.date=new Date(a.date);var i=a.date.toLocaleDateString(),o=a.date.toLocaleTimeString().split(":");o=o[0]+":"+o[1];var l=function(e){var n=Object(A.a)({},a);n[e.target.getAttribute("data")]=!n[e.target.getAttribute("data")];var i=c.filter((function(e){return e._id!==a._id}));i=[n].concat(Object(j.a)(i)),fetch("https://melch-babytracker.herokuapp.com/api/reports/"+n._id,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t.token)},body:JSON.stringify({report:n})}).then((function(e){return e.json()})).then((function(){r(i)})).catch((function(e){return console.log(e)}))};return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("tr",{children:[Object(s.jsxs)("td",{children:[i,Object(s.jsx)("br",{}),o]}),Object(s.jsxs)("td",{children:[Object(s.jsx)("img",{onClick:l,data:"urine",src:g,alt:"pee drop",className:a.urine?"active":""}),Object(s.jsx)("img",{onClick:l,data:"stools",src:p,alt:"poop",className:a.stools?"active":""}),Object(s.jsx)("img",{onClick:l,data:"feeding",src:b,alt:"feeding bottle",className:a.feeding?"active":""})]}),Object(s.jsx)("td",{children:Object(s.jsx)(u.a,{onClick:function(){n({id:a._id})},icon:d.a,style:{color:"lightcoral",cursor:"pointer"}})})]})})},O=function(e){var t=e.handleYes,a=e.handleNo;return Object(s.jsxs)("div",{className:"popup",children:[Object(s.jsx)("p",{className:"popup__message",children:"Voulez-vous vraiment supprimer la ligne ?"}),Object(s.jsxs)("div",{className:"popup__button",children:[Object(s.jsx)("button",{onClick:t,className:"popup__button--yes",children:"Oui"}),Object(s.jsx)("button",{onClick:a,className:"popup__button--no",children:"Non"})]})]})};function m(){var e=new Date;return"24:00"===f()?(e.setDate(e.getDate()+1),e.toLocaleDateString().split("/").reverse().join("-")):e.toLocaleDateString().split("/").reverse().join("-")}function f(){var e=(new Date).toLocaleTimeString().split(":"),t=e[0],a=5*Math.round(e[1]/5);return 60===a&&(a=0,t++),String("000"+t).slice(-2)+":"+String("000"+a).slice(-2)}var x=function(e){var t=e.setAddPopup,a=e.displayDatas,c=e.setDisplayDatas,r=e.isLogged,i=Object(n.useState)({date:m(),time:"24:00"===f()?"00:00":f(),urine:!1,stools:!1,feeding:!1}),o=Object(l.a)(i,2),d=o[0],u=o[1],h=function(e){var t=Object(A.a)({},d);t[e.target.getAttribute("data")]=!t[e.target.getAttribute("data")],u(t)};return Object(s.jsxs)("div",{className:"popup",children:[Object(s.jsx)("h2",{children:"Ajouter une ligne"}),Object(s.jsx)("input",{type:"date",value:d.date,onChange:function(e){var t=Object(A.a)({},d);t.date=e.target.value,u(t)}}),Object(s.jsx)("input",{type:"time",step:"300",value:d.time,onChange:function(e){var t=Object(A.a)({},d);t.time=e.target.value,u(t)}}),Object(s.jsxs)("div",{className:"popup__images",children:[Object(s.jsx)("img",{draggable:"false",data:"urine",onClick:h,src:g,alt:"pee drop",className:d.urine?"active":""}),Object(s.jsx)("img",{draggable:"false",data:"stools",onClick:h,src:p,alt:"poop",className:d.stools?"active":""}),Object(s.jsx)("img",{draggable:"false",data:"feeding",onClick:h,src:b,alt:"feeding bottle",className:d.feeding?"active":""})]}),Object(s.jsx)("button",{onClick:function(){var e=Object(A.a)({},d);e.date=new Date(e.date+", "+e.time),delete e.time,fetch("https://melch-babytracker.herokuapp.com/api/reports/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(r.token)},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){var t=[e.report].concat(Object(j.a)(a));c(t)})).catch((function(e){return console.log(e)})),t(null)},className:"addButton",children:"Valider"}),Object(s.jsx)("button",{onClick:function(){t(null)},className:"addButton",children:"Annuler"})]})},D=function(e){var t=e.displayDatas,a=e.date,c=Object(n.useState)({urine:0,stools:0,feeding:0}),r=Object(l.a)(c,2),i=r[0],o=r[1];return Object(n.useEffect)((function(){var e={urine:0,stools:0,feeding:0};t.forEach((function(t){t.date.toLocaleDateString()===a.toLocaleDateString()&&(e.urine+=!0===t.urine?1:0,e.stools+=!0===t.stools?1:0,e.feeding+=!0===t.feeding?1:0)})),o(e)}),[t]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{style:{padding:"1rem"},children:"R\xe9cap de la journ\xe9e"}),Object(s.jsxs)("div",{className:"recapTable",children:[Object(s.jsx)("span",{children:i.urine}),Object(s.jsx)("img",{src:g,alt:"pee drop",height:"50px"}),Object(s.jsx)("span",{children:i.stools}),Object(s.jsx)("img",{src:p,alt:"poop",height:"50px"}),Object(s.jsx)("span",{children:i.feeding}),Object(s.jsx)("img",{src:b,alt:"fedding bottle",height:"50px"})]})]})},v=function(e){var t=e.date,a=e.setDate;return Object(s.jsxs)("div",{className:"datePicker",children:[Object(s.jsx)("div",{onClick:function(){var e=new Date(t);e.setDate(t.getDate()-1),a(e)},className:"triangle triangle--left"}),Object(s.jsx)("p",{onClick:function(){a(new Date)},children:t.toLocaleDateString()}),Object(s.jsx)("div",{onClick:function(){var e=new Date(t);e.setDate(t.getDate()+1),a(e)},className:"triangle triangle--right"})]})},B=function(e){var t=e.setisLogged;return Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault();var a=e.target[0].value,n=e.target[1].value;a&&n?fetch("https://melch-babytracker.herokuapp.com/api/user/login/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userName:a,password:n})}).then((function(e){return e.json()})).then((function(e){e.error||(localStorage.setItem("isLogged",JSON.stringify(e)),t(e))})).catch((function(e){return console.log(e)})):alert("Merci de renseigner un nom d'utilisateur et un mot de passe")},className:"loginForm",children:[Object(s.jsxs)("label",{htmlFor:"username",children:["Nom d'utilisateur : ",Object(s.jsx)("input",{id:"username",name:"username",type:"text",placeholder:"Nom d'utilisateur"})]}),Object(s.jsxs)("label",{htmlFor:"password",children:["Mot de passe : ",Object(s.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"Mot de passe"})]}),Object(s.jsx)("button",{type:"submit",children:"Se connecter"})]})},k=function(){var e,t=Object(n.useState)(null),a=Object(l.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(null),o=Object(l.a)(i,2),j=o[0],A=o[1],g=Object(n.useState)(null),p=Object(l.a)(g,2),b=p[0],m=p[1],f=Object(n.useState)(!1),k=Object(l.a)(f,2),S=k[0],N=k[1],I=Object(n.useState)(new Date),w=Object(l.a)(I,2),C=w[0],L=w[1],F=Object(n.useState)(null!==(e=JSON.parse(localStorage.getItem("isLogged")))&&void 0!==e&&e),y=Object(l.a)(F,2),J=y[0],P=y[1];Object(n.useEffect)((function(){J&&fetch("https://melch-babytracker.herokuapp.com/api/reports/",{headers:{Authorization:"Bearer ".concat(J.token)}}).then((function(e){return e.json()})).then((function(e){r(e.reports),e.reports=e.reports.filter((function(e){return new Date(e.date).toLocaleDateString()===C.toLocaleDateString()})),A(e.reports)})).catch((function(e){return console.log("Error : ",e)}))}),[J.token]),Object(n.useEffect)((function(){if(c){var e=c.filter((function(e){return new Date(e.date).toLocaleDateString()===C.toLocaleDateString()}));A(e)}}),[C]);var z=function(){m(null)};return Object(s.jsxs)(s.Fragment,{children:[!J&&Object(s.jsx)(B,{setisLogged:P}),j&&J&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("button",{className:"addButton",onClick:function(){N(!0)},children:"Ajouter une ligne"}),Object(s.jsx)(v,{date:C,setDate:L}),Object(s.jsx)(D,{displayDatas:j,date:C}),Object(s.jsxs)("table",{className:"tracker__table",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Heure"}),Object(s.jsx)("th",{children:"Suivi"}),Object(s.jsx)("th",{children:Object(s.jsx)(u.a,{icon:d.a})})]})}),Object(s.jsx)("tbody",{children:j&&j.map((function(e,t){return Object(s.jsx)(h,{data:e,setDeletePopup:m,displayDatas:j,setDisplayDatas:A,isLogged:J},"reportsListing-".concat(t))}))})]}),b&&Object(s.jsx)(O,{handleNo:z,handleYes:function(){fetch("https://melch-babytracker.herokuapp.com/api/reports/"+b.id,{method:"DELETE",headers:{Authorization:"Bearer ".concat(J.token)}}).then((function(){var e=j.filter((function(e){return e._id!==b.id}));A(e),z()})).catch((function(e){return console.log(e)}))}}),S&&Object(s.jsx)(x,{isLogged:J,setAddPopup:N,displayDatas:j,setDisplayDatas:A})]}),!c&&J&&Object(s.jsx)("div",{className:"loader"})]})};a(24);i.a.render(Object(s.jsxs)(c.a.StrictMode,{children:[Object(s.jsx)(o,{}),Object(s.jsx)("main",{children:Object(s.jsx)(k,{})})]}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.fd73ec66.chunk.js.map